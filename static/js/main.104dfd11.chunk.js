(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(e,t,a){e.exports={Overlay:"Modal_Overlay__FDbYr",Modal:"Modal_Modal__1c4iq",Img:"Modal_Img__2_ufi"}},14:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2ZqcJ",text:"ImageGallery_text__2gJ7F"}},16:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__VkHV4",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__2d1iC"}},18:function(e,t,a){e.exports={load_more:"Button_load_more__1rWQb",Button:"Button_Button__2DuGA"}},31:function(e,t,a){e.exports={Loader:"Loader_Loader__oZpIA"}},36:function(e,t,a){},39:function(e,t,a){},8:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__35Nrq",SearchForm:"Searchbar_SearchForm__2oBb7",SearchForm__button:"Searchbar_SearchForm__button__1T0hL",SearchForm__button__label:"Searchbar_SearchForm__button__label__3Y7-k",SearchForm__input:"Searchbar_SearchForm__input__3itEP"}},80:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(11),c=a.n(s),o=(a(36),a(4)),i=a(5),l=a(7),u=a(6),h=a(12),m=(a(37),a(8)),g=a.n(m),b=a(1),p=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchImageName:""},e.handleNameChange=function(t){e.setState({searchImageName:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchImageName.trim()?(e.props.onSubmit(e.state.searchImageName),e.setState({searchImageName:""})):h.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438!")},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("header",{className:g.a.Searchbar,children:Object(b.jsxs)("form",{className:g.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:g.a.SearchForm__button,children:Object(b.jsx)("span",{className:g.a.SearchForm__button__label,children:"Search"})}),Object(b.jsx)("input",{className:g.a.SearchForm__input,value:this.state.searchImageName,type:"text",placeholder:"Search images and photos",onChange:this.handleNameChange})]})})}}]),a}(r.Component),d=(a(39),a(19)),_=a(16),j=a.n(_),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.searchResult.map((function(t){return Object(b.jsx)("li",{className:j.a.ImageGalleryItem,children:Object(b.jsx)("img",{src:t.webformatURL,alt:t.tags,className:j.a.ImageGalleryItem__image,onClick:e.props.onImageClick})},t.id)}))}}]),a}(r.Component),y=a(17),O=a.n(y),I=a(28),v=a(29),S=a.n(v),x=function(){function e(){Object(o.a)(this,e),this.base_url="https://pixabay.com/api/",this.api_key="22572278-f825929a97bc5f7e53341dcc7",this._searchQuery="",this._page=1,this._perPage=12}return Object(i.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchImages",value:function(){var e=Object(I.a)(O.a.mark((function e(){var t,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.base_url,"?q=").concat(this._searchQuery,"&page=").concat(this.page,"&key=").concat(this.api_key,"&image_type=photo&orientation=horizontal&per_page=").concat(this._perPage),e.prev=1,e.next=4,S.a.get(t);case 4:return a=e.sent,r=a.data.hits,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=a(18),w=a.n(k),N=function(e){var t=e.onClick;return Object(b.jsx)("div",{className:w.a.load_more,children:Object(b.jsx)("button",{className:w.a.Button,type:"button",onClick:t,children:"Load more"})})},C=(a(59),a(30)),M=a.n(C),F=a(31),G=a.n(F),L=function(){return Object(b.jsx)(M.a,{className:G.a.Loader,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},R=a(13),B=a.n(R),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleKeyDownClose=function(t){"Escape"===t.code&&e.props.toggleModal()},e.handleBackdropClose=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDownClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDownClose)}},{key:"render",value:function(){return Object(b.jsx)("div",{onClick:this.handleBackdropClose,className:B.a.Overlay,children:Object(b.jsx)("div",{className:B.a.Modal,children:Object(b.jsx)("img",{className:B.a.Img,src:this.props.bigImg.largeImageURL,alt:this.props.bigImg.tags})})})}}]),a}(r.Component),P=a(14),E=a.n(P),Q=new x,A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchResult:[],status:"idle",bigImg:null,showModal:!1},e.handleClick=function(){Q.page=1,Q.searchImages().then((function(t){e.setState((function(e){return{searchResult:[].concat(Object(d.a)(e.searchResult),Object(d.a)(t)),status:"success"}}))})).catch((function(t){console.log(t),e.setState({status:"error"})})),setTimeout((function(){return e.props.scroll()}),1e3)},e.toggleModal=function(){e.setState({showModal:!e.state.showModal}),console.log(e.state.showModal)},e.onImageClick=function(t){t.preventDefault();var a=t.target.src;console.log(a),e.setState({bigImg:e.state.searchResult.find((function(e){return e.webformatURL===a}))}),e.toggleModal()},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;e.searchImageName!==this.props.searchImageName&&(this.setState({status:"pending"}),Q.resetPage(),Q.searchQuery=this.props.searchImageName,Q.searchImages().then((function(e){a.setState({searchResult:e,status:"success"})})).catch((function(e){console.log(e),a.setState({status:"error"})})))}},{key:"render",value:function(){return"idle"===this.state.status?Object(b.jsx)("p",{className:E.a.text,children:"Hello! Enter the name of the picture"}):"pending"===this.state.status?Object(b.jsx)(L,{}):"success"===this.state.status?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:E.a.ImageGallery,children:Object(b.jsx)(f,{searchResult:this.state.searchResult,onImageClick:this.onImageClick})}),Object(b.jsx)(N,{onClick:this.handleClick}),this.state.showModal&&Object(b.jsx)(D,{toggleModal:this.toggleModal,bigImg:this.state.bigImg})]}):"error"===this.state.status?Object(b.jsx)("p",{className:E.a.text,children:"Something went wrong"}):void 0}}]),a}(r.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchImageName:"",showModal:!1},e.handleSearchbarSubmit=function(t){e.setState({searchImageName:t})},e}return Object(i.a)(a,[{key:"onPageScroll",value:function(){window.scrollTo({top:document.documentElement.offsetHeight,behavior:"smooth"})}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{onSubmit:this.handleSearchbarSubmit}),Object(b.jsx)(A,{searchImageName:this.state.searchImageName,scroll:this.onPageScroll}),Object(b.jsx)(h.a,{autoClose:3e3})]})}}]),a}(r.Component);c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.104dfd11.chunk.js.map